{"version":3,"sources":["resizable.js"],"names":["define","langx","noder","datax","finder","geom","eventer","styler","$","plugins","interact","Movable","on","off","attr","removeAttr","pagePosition","addClass","height","Array","prototype","some","map","Resizable","Plugin","inherit","klassName","pluginName","options","touchActionNone","handle","border","directions","top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","classes","all","grabber","selector","direction","constraints","minWidth","minHeight","_construct","elm","this","overrided","startedCallback","started","movingCallback","moving","stoppedCallback","stopped","handleResize","handleEl","dir","startRect","auto","e","relativeRect","currentRect","width","deltaX","deltaY","isString","find","isHtmlNode","createElement","className","remove","_handleEl","register"],"mappings":";;;;;;;AAAAA,QACI,sBACA,qBACA,oBACA,sBACA,oBACA,uBACA,sBACA,qBACA,uBACA,aACA,aACF,SAASC,EAAMC,EAAMC,EAAMC,EAAOC,EAAKC,EAAQC,EAAOC,EAAEC,EAAQC,EAASC,GAC9DL,EAAQM,GACPN,EAAQO,IACPV,EAAMW,KACAX,EAAMY,WACVV,EAAKW,aACHT,EAAOU,SACTZ,EAAKa,OACPC,MAAMC,UAAUC,KACjBF,MAAMC,UAAUE,IAR1B,IAWIC,EAAYd,EAAQe,OAAOC,SAC3BC,UAAW,YAEXC,WAAe,iBAEfC,SAEIC,iBAAiB,EAGjBC,QACIC,QACIC,YACIC,KAAK,EACLC,MAAM,EACNC,OAAO,EACPC,QAAQ,EACRC,SAAU,EACVC,UAAW,EACXC,YAAa,EACbC,aAAc,GAElBC,SACIC,IAAM,mBACNT,IAAM,qBACNC,KAAM,qBACNC,MAAO,qBACPC,OAAQ,qBACRC,QAAU,sBACVC,SAAW,sBACXC,WAAa,sBACbC,YAAc,wBAGtBG,SACIC,SAAW,GACXC,UAAY,eAEhBD,UAAU,GAGdE,aACIC,SAAW,KACXC,UAAY,OAIpBC,WAAY,SAAUC,EAAKtB,GACvBuB,KAAKC,UAAUF,EAAItB,GAInB,IAAIE,GADJF,EAAUuB,KAAKvB,SACME,WAIjBuB,GAFYzB,EAAQiB,UAEFjB,EAAQ0B,SAC1BC,EAAiB3B,EAAQ4B,OACzBC,EAAkB7B,EAAQ8B,QAQ9B,SAASC,EAAaC,EAASC,EAAId,EAASC,GACxC,IAAKc,EAELnD,EAAQiD,GACJG,MAAO,EACPT,QAAU,SAASU,GACfF,EAAYzD,EAAK4D,aAAaf,GAC1BG,GACAA,EAAgBW,IAGxBR,OAAS,SAASQ,GACdE,eAEW,SAAPL,GAAyB,YAAPA,GAA4B,eAAPA,IACvCK,YAAYC,MAAQL,EAAUK,MAAQH,EAAEI,QAGjC,UAAPP,GAA0B,cAAPA,GAA8B,eAAPA,IAC1CK,YAAYhD,OAAS4C,EAAU5C,OAAS8C,EAAEK,QAGnC,QAAPR,GAAwB,WAAPA,GAA2B,cAAPA,IACrCK,YAAYhC,KAAO4B,EAAU5B,KAAO8B,EAAEI,OACtCF,YAAYC,MAAQL,EAAUK,MAAQH,EAAEI,QAGjC,OAAPP,GAAuB,WAAPA,GAA2B,YAAPA,IACpCK,YAAYjC,IAAM6B,EAAU7B,IAAM+B,EAAEK,OACpCH,YAAYhD,OAAS4C,EAAU5C,OAAS8C,EAAEK,QAG9ChE,EAAK4D,aAAaf,EAAIgB,aAElBX,GACAA,EAAeS,IAGvBN,QAAS,SAASM,GACVP,GACAA,EAAgBO,MAMhC,GApDI/D,EAAMqE,SAASxC,GACJ1B,EAAOmE,KAAKrB,EAAIpB,GACpB7B,EAAMuE,WAAW1C,IACbA,EAiDXA,GAAUA,EAAOC,OAAQ,CAEzB,IAAK,IAAI8B,KAAO/B,EAAOC,OAAOC,WAC1B,GAAIF,EAAOC,OAAOC,WAAW6B,GAAM,CAK/BF,EAJezD,EAAMuE,cAAc,OAC/BC,UAAa5C,EAAOC,OAAOU,QAAQC,IAAM,IAAMZ,EAAOC,OAAOU,QAAQoB,GACrEhB,UAAcgB,GAChBX,GACoBW,IAOlC,GAAI/B,GAAUA,EAAOa,SAAWb,EAAOa,QAAQC,SAAU,CAEpDe,EADevD,EAAOmE,KAAKrB,EAAIpB,EAAOa,QAAQC,UACxBd,EAAOa,QAAQE,aAM9C8B,OAAQ,WACJrE,EAAQO,IAAIsC,KAAKyB,cAMzB,OAFAnE,EAAQoE,SAAStD,EAAU,aAEpBb,EAASa,UAAYA","file":"../resizable.js","sourcesContent":["define([\r\n    \"skylark-langx/langx\",\r\n    \"skylark-domx-noder\",\r\n    \"skylark-domx-data\",\r\n    \"skylark-domx-finder\",\r\n    \"skylark-domx-geom\",\r\n    \"skylark-domx-eventer\",\r\n    \"skylark-domx-styler\",\r\n    \"skylark-domx-query\",\r\n    \"skylark-domx-plugins\",\r\n    \"./interact\",\r\n    \"./Movable\"\r\n],function(langx,noder,datax,finder,geom,eventer,styler,$,plugins,interact,Movable){\r\n    var on = eventer.on,\r\n        off = eventer.off,\r\n        attr = datax.attr,\r\n        removeAttr = datax.removeAttr,\r\n        offset = geom.pagePosition,\r\n        addClass = styler.addClass,\r\n        height = geom.height,\r\n        some = Array.prototype.some,\r\n        map = Array.prototype.map;\r\n\r\n\r\n    var Resizable = plugins.Plugin.inherit({\r\n        klassName: \"Resizable\",\r\n\r\n        \"pluginName\" : \"lark.resizable\",\r\n        \r\n        options : {\r\n            // prevents browser level actions like forward back gestures\r\n            touchActionNone: true,\r\n\r\n            // selector for handle that starts dragging\r\n            handle : {\r\n                border : {\r\n                    directions : {\r\n                        top: true, //n\r\n                        left: true, //w\r\n                        right: true, //e\r\n                        bottom: true, //s\r\n                        topLeft : true, // nw\r\n                        topRight : true, // ne\r\n                        bottomLeft : true, // sw\r\n                        bottomRight : true // se                         \r\n                    },\r\n                    classes : {\r\n                        all : \"resizable-handle\",\r\n                        top : \"resizable-handle-n\",\r\n                        left: \"resizable-handle-w\",\r\n                        right: \"resizable-handle-e\",\r\n                        bottom: \"resizable-handle-s\", \r\n                        topLeft : \"resizable-handle-nw\", \r\n                        topRight : \"resizable-handle-ne\",\r\n                        bottomLeft : \"resizable-handle-sw\",             \r\n                        bottomRight : \"resizable-handle-se\"                         \r\n                    }\r\n                },\r\n                grabber: {\r\n                    selector : \"\",\r\n                    direction : \"bottomRight\"\r\n                },\r\n                selector: true\r\n            },\r\n\r\n            constraints : {\r\n                minWidth : null,\r\n                minHeight : null\r\n            }\r\n        },\r\n\r\n        _construct :function (elm, options) {\r\n            this.overrided(elm,options);\r\n\r\n\r\n            options = this.options;\r\n            var handle = options.handle || {},\r\n                handleEl,\r\n                direction = options.direction,\r\n                currentSize,\r\n                startedCallback = options.started,\r\n                movingCallback = options.moving,\r\n                stoppedCallback = options.stopped;\r\n\r\n            if (langx.isString(handle)) {\r\n                handleEl = finder.find(elm,handle);\r\n            } else if (langx.isHtmlNode(handle)) {\r\n                handleEl = handle;\r\n            }\r\n\r\n            function handleResize(handleEl,dir,minWidth,minHeight) {\r\n                let  startRect;\r\n\r\n                Movable(handleEl,{\r\n                    auto : false,\r\n                    started : function(e) {\r\n                        startRect = geom.relativeRect(elm);\r\n                        if (startedCallback) {\r\n                            startedCallback(e);\r\n                        }\r\n                    },\r\n                    moving : function(e) {\r\n                        currentRect = {\r\n                        };\r\n                        if (dir == \"right\" || dir == \"topRight\" || dir == \"bottomRight\" ) {\r\n                            currentRect.width = startRect.width + e.deltaX;\r\n                        } \r\n\r\n                        if (dir == \"bottom\" || dir == \"bottomLeft\" || dir == \"bottomRight\" ) {\r\n                            currentRect.height = startRect.height + e.deltaY;\r\n                        } \r\n\r\n                        if (dir == \"left\" || dir == \"topLeft\" || dir == \"bottomLeft\" ) {\r\n                            currentRect.left = startRect.left + e.deltaX;\r\n                            currentRect.width = startRect.width - e.deltaX;\r\n                        } \r\n\r\n                        if (dir == \"top\" || dir == \"topLeft\" || dir == \"topRight\" ) {\r\n                            currentRect.top = startRect.top + e.deltaY;\r\n                            currentRect.height = startRect.height - e.deltaY;\r\n                        } \r\n\r\n                        geom.relativeRect(elm,currentRect);\r\n\r\n                        if (movingCallback) {\r\n                            movingCallback(e);\r\n                        }\r\n                    },\r\n                    stopped: function(e) {\r\n                        if (stoppedCallback) {\r\n                            stoppedCallback(e);\r\n                        }                \r\n                    }\r\n                });\r\n            }\r\n\r\n            if (handle && handle.border) {\r\n                let borders = []\r\n                for (var dir in handle.border.directions) {\r\n                    if (handle.border.directions[dir]) {\r\n                        let handleEl = noder.createElement(\"div\",{\r\n                            \"className\": handle.border.classes.all + \" \" + handle.border.classes[dir],\r\n                            \"direction\" : dir\r\n                        },elm);   \r\n                        handleResize(handleEl,dir) ; \r\n\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n            if (handle && handle.grabber && handle.grabber.selector) {\r\n                 let handleEl = finder.find(elm,handle.grabber.selector);\r\n                 handleResize(handleEl,handle.grabber.direction) ; \r\n            }\r\n\r\n        },\r\n\r\n        // destroys the dragger.\r\n        remove: function() {\r\n            eventer.off(this._handleEl);\r\n        }\r\n    });\r\n\r\n    plugins.register(Resizable,\"resizable\");\r\n\r\n    return interact.Resizable = Resizable;\r\n});\r\n"]}