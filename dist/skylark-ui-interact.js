/**
 * skylark-ui-interact - The interact features enhancement for dom.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(e,r){var t=r.define,a=r.require,n="function"==typeof t&&t.amd,i=!n&&"undefined"!=typeof exports;if(!n&&!t){var o={};t=r.define=function(e,r,t){"function"==typeof t?(o[e]={factory:t,deps:r.map(function(r){return function(e,r){if("."!==e[0])return e;var t=r.split("/"),a=e.split("/");t.pop();for(var n=0;n<a.length;n++)"."!=a[n]&&(".."==a[n]?t.pop():t.push(a[n]));return t.join("/")}(r,e)}),resolved:!1,exports:null},a(e)):o[e]={factory:null,resolved:!0,exports:t}},a=r.require=function(e){if(!o.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var t=o[e];if(!t.resolved){var n=[];t.deps.forEach(function(e){n.push(a(e))}),t.exports=t.factory.apply(r,n)||null,t.resolved=!0}return t.exports}}if(!t)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,r){e("skylark-ui-interact/interact",["skylark-langx/skylark","skylark-langx/langx"],function(e,r){var t=e.interact={};return t}),e("skylark-ui-interact/ddmanager",["./interact","skylark-langx/langx","skylark-utils-dom/noder","skylark-utils-dom/datax","skylark-utils-dom/finder","skylark-utils-dom/geom","skylark-utils-dom/eventer","skylark-utils-dom/styler"],function(e,r,t,a,n,i,o,s){o.on,o.off,a.attr,a.removeAttr,i.pagePosition,s.addClass,i.height;var l=e.DndManager=r.Evented.inherit({klassName:"DndManager",init:function(){},prepare:function(e){var r=o.create("preparing",{dragSource:e.dragSource,dragHandle:e.dragHandle});e.trigger(r),e.dragSource=r.dragSource},start:function(e,t){var a=i.pagePosition(e.dragSource);this.draggingOffsetX=parseInt(t.pageX-a.left),this.draggingOffsetY=parseInt(t.pageY-a.top);var n=o.create("started",{elm:e.elm,dragSource:e.dragSource,dragHandle:e.dragHandle,ghost:null,transfer:{}});e.trigger(n),this.dragging=e,e.draggingClass&&s.addClass(e.dragSource,e.draggingClass),this.draggingGhost=n.ghost,this.draggingGhost||(this.draggingGhost=e.elm),this.draggingTransfer=n.transfer,this.draggingTransfer&&r.each(this.draggingTransfer,function(e,r){t.dataTransfer.setData(e,r)}),t.dataTransfer.setDragImage(this.draggingGhost,this.draggingOffsetX,this.draggingOffsetY),t.dataTransfer.effectAllowed="copyMove";var l=o.create("dndStarted",{elm:n.elm,dragSource:n.dragSource,dragHandle:n.dragHandle,ghost:n.ghost,transfer:n.transfer});this.trigger(l)},over:function(){},end:function(e){var r=this.dragging;r&&r.draggingClass&&s.removeClass(r.dragSource,r.draggingClass);var t=o.create("dndEnded",{});this.trigger(t),this.dragging=null,this.draggingTransfer=null,this.draggingGhost=null,this.draggingOffsetX=null,this.draggingOffsetY=null}}),d=new l;return d}),e("skylark-ui-interact/Draggable",["skylark-langx/langx","skylark-utils-dom/noder","skylark-utils-dom/datax","skylark-utils-dom/finder","skylark-utils-dom/geom","skylark-utils-dom/eventer","skylark-utils-dom/styler","skylark-utils-dom/plugins","./interact","./ddmanager"],function(e,r,t,a,n,i,o,s,l,d){i.on,i.off,t.attr,t.removeAttr,n.pagePosition,o.addClass,n.height;var g=s.Plugin.inherit({klassName:"Draggable",pluginName:"lark.draggable",options:{draggingClass:"dragging"},_construct:function(r,n){this.overrided(r,n);var o=this,n=this.options;o.draggingClass=n.draggingClass,["preparing","started","ended","moving"].forEach(function(r){e.isFunction(n[r])&&o.on(r,n[r])}),i.on(r,{mousedown:function(e){var r=o.options;r.handle&&(o.dragHandle=a.closest(e.target,r.handle),!o.dragHandle)||(r.source?o.dragSource=a.closest(e.target,r.source):o.dragSource=o._elm,d.prepare(o),o.dragSource&&t.attr(o.dragSource,"draggable","true"))},mouseup:function(e){o.dragSource&&(o.dragSource=null,o.dragHandle=null)},dragstart:function(e){t.attr(o.dragSource,"draggable","false"),d.start(o,e)},dragend:function(e){i.stop(e),d.dragging&&d.end(!1)}})}});return s.register(g,"draggable"),l.Draggable=g}),e("skylark-ui-interact/Droppable",["skylark-langx/langx","skylark-utils-dom/noder","skylark-utils-dom/datax","skylark-utils-dom/finder","skylark-utils-dom/geom","skylark-utils-dom/eventer","skylark-utils-dom/styler","skylark-utils-dom/plugins","./interact","./ddmanager"],function(e,r,t,a,n,i,o,s,l,d){i.on,i.off,t.attr,t.removeAttr,n.pagePosition,o.addClass,n.height;var g=s.Plugin.inherit({klassName:"Droppable",pluginName:"lark.droppable",options:{draggingClass:"dragging"},_construct:function(r,t){this.overrided(r,t);var a,n,s=this,t=s.options,l=(t.draggingClass,!0);["started","entered","leaved","dropped","overing"].forEach(function(r){e.isFunction(t[r])&&s.on(r,t[r])}),i.on(r,{dragover:function(e){if(e.stopPropagation(),l){var r=i.create("overing",{overElm:e.target,transfer:d.draggingTransfer,acceptable:!0});s.trigger(r),r.acceptable&&(e.preventDefault(),e.dataTransfer.dropEffect="copyMove")}},dragenter:function(e){s.options;var r=s._elm,t=i.create("entered",{transfer:d.draggingTransfer});s.trigger(t),e.stopPropagation(),a&&l&&o.addClass(r,a)},dragleave:function(e){s.options;var r=s._elm;if(!l)return!1;var t=i.create("leaved",{transfer:d.draggingTransfer});s.trigger(t),e.stopPropagation(),a&&l&&o.removeClass(r,a)},drop:function(e){s.options;var r=s._elm;if(i.stop(e),d.dragging){a&&l&&o.addClass(r,a);var t=i.create("dropped",{transfer:d.draggingTransfer});s.trigger(t),d.end(!0)}}}),d.on("dndStarted",function(e){var t=i.create("started",{transfer:d.draggingTransfer,acceptable:!1});s.trigger(t),l=t.acceptable,a=t.hoverClass,(n=t.activeClass)&&l&&o.addClass(r,n)}).on("dndEnded",function(e){var t=i.create("ended",{transfer:d.draggingTransfer,acceptable:!1});s.trigger(t),a&&l&&o.removeClass(r,a),n&&l&&o.removeClass(r,n),l=!1,n=null,a=null})}});return s.register(g,"droppable"),l.Droppable=g}),e("skylark-ui-interact/Movable",["skylark-langx/langx","skylark-utils-dom/noder","skylark-utils-dom/datax","skylark-utils-dom/geom","skylark-utils-dom/eventer","skylark-utils-dom/styler","skylark-utils-dom/plugins","./interact"],function(e,r,t,a,n,i,o,s){n.on,n.off,t.attr,t.removeAttr,a.pagePosition,i.addClass,a.height,Array.prototype.some,Array.prototype.map;var l=o.Plugin.inherit({klassName:"Movable",pluginName:"lark.movable",_construct:function(e,t){function o(e){var r,t;if(e.changedTouches)for(r="screenX screenY pageX pageY clientX clientY".split(" "),t=0;t<r.length;t++)e[r[t]]=e.changedTouches[0][r[t]]}this.overrided(e,t);var s,l,d,g,u=(t=this.options).handle||e,c=!1!==t.auto,f=t.constraints,p=t.document||document,h=t.started,m=t.moving,k=t.stopped,v=function(r){if(o(r),0!==r.button)return y(r);if(r.deltaX=r.screenX-l,r.deltaY=r.screenY-d,c){var t=g.left+r.deltaX,n=g.top+r.deltaY;f&&(t<f.minX&&(t=f.minX),t>f.maxX&&(t=f.maxX),n<f.minY&&(n=f.minY),n>f.maxY&&(n=f.maxY))}a.relativePosition(e,{left:t,top:n}),r.preventDefault(),m&&m(r)},y=function(e){o(e),n.off(p,"mousemove touchmove",v).off(p,"mouseup touchend",y),r.remove(s),k&&k(e)};n.on(u,"mousedown touchstart",function(t){var c,f=a.getDocumentSize(p);o(t),t.preventDefault(),t.button,l=t.screenX,d=t.screenY,g=a.relativePosition(e),a.size(e),c=i.css(u,"curosr"),s=r.createElement("div"),i.css(s,{position:"absolute",top:0,left:0,width:f.width,height:f.height,zIndex:2147483647,opacity:1e-4,cursor:c}),r.append(p.body,s),n.on(p,"mousemove touchmove",v).on(p,"mouseup touchend",y),h&&h(t)}),this._handleEl=u},remove:function(){n.off(this._handleEl)}});return o.register(l,"movable"),s.Movable=l}),e("skylark-ui-interact/Resizable",["skylark-langx/langx","skylark-utils-dom/noder","skylark-utils-dom/datax","skylark-utils-dom/finder","skylark-utils-dom/geom","skylark-utils-dom/eventer","skylark-utils-dom/styler","skylark-utils-dom/query","skylark-utils-dom/plugins","./interact","./Movable"],function(e,r,t,a,n,i,o,s,l,d,g){i.on,i.off,t.attr,t.removeAttr,n.pagePosition,o.addClass,n.height,Array.prototype.some,Array.prototype.map;var u=l.Plugin.inherit({klassName:"Resizable",pluginName:"lark.resizable",options:{touchActionNone:!0,direction:{top:!1,left:!1,right:!0,bottom:!0},handle:{border:!0,grabber:"",selector:!0}},_construct:function(r,t){this.overrided(r,t);var i,o,s,l=(t=this.options).handle||{},d=t.direction,u=t.started,c=t.moving,f=t.stopped;e.isString(l)?i=a.find(r,l):e.isHtmlNode(l)&&(i=l),g(i,{auto:!1,started:function(e){o=n.size(r),u&&u(e)},moving:function(e){s={},d.left||d.right?s.width=o.width+e.deltaX:s.width=o.width,d.top||d.bottom?s.height=o.height+e.deltaY:s.height=o.height,n.size(r,s),c&&c(e)},stopped:function(e){f&&f(e)}}),this._handleEl=i},remove:function(){i.off(this._handleEl)}});return l.register(u,"resizable"),d.Resizable=u}),e("skylark-ui-interact/Selectable",["skylark-langx/langx","skylark-utils-dom/noder","skylark-utils-dom/datax","skylark-utils-dom/geom","skylark-utils-dom/eventer","skylark-utils-dom/styler","skylark-utils-dom/query","./interact","./Movable"],function(e,r,t,a,n,i,o,s,l){n.on,n.off,t.attr,t.removeAttr,a.pagePosition,i.addClass,a.height,Array.prototype.some,Array.prototype.map;var d,g,u,c,f,p,h,m,k="",v={left:!0,right:!0,top:!0,bottom:!0};function y(e){e.target;c=a.size(u),p&&p(e)}function b(e){f={},v.left||v.right?f.width=c.width+e.deltaX:f.width=c.width,v.top||v.bottom?f.height=c.height+e.deltaY:f.height=c.height,a.size(u,f),a.pageRect(d,a.pageRect(u)),h&&h(e)}function x(e){m&&m(e)}function C(){return C}return e.mixin(C,{init:function(e){k=(e=e||{}).classPrefix||"";var t=e.appendTo||document.body;for(var a in d=r.createElement("div",{class:k+"resizer-c"}),r.append(t,d),g={},["tl","tc","tr","cl","cr","bl","bc","br"].forEach(function(e){return g[e]=r.createElement("i",{class:k+"resizer-h "+k+"resizer-h-"+e,"data-resize-handler":e})}),g){var n=g[a];r.append(d,n),l(n,{auto:!1,started:y,moving:b,stopped:x})}},select:function(e,r){if(e&&e===u)return;u=e,startDim=rectDim=startPos=null,a.pageRect(d,a.pageRect(u)),i.show(d)},unselect:function(e){d&&i.hide(d);u=null}}),s.Selectable=C}),e("skylark-ui-interact/Sortable",["./interact","skylark-langx/langx","skylark-utils-dom/noder","skylark-utils-dom/datax","skylark-utils-dom/geom","skylark-utils-dom/eventer","skylark-utils-dom/styler","skylark-utils-dom/query","skylark-utils-dom/plugins","./Draggable","./Droppable","./Movable","./Resizable"],function(e,r,t,a,n,i,o,s,l,d,g,u,c){i.on,i.off,a.attr,a.removeAttr,n.pagePosition,o.addClass,n.height,Array.prototype.some,Array.prototype.map,l.Plugin.inherit({klassName:"Sorter",enable:function(){},disable:function(){},destory:function(){}});var f,p=s(),h=l.Plugin.inherit({klassName:"Sortable",pluginName:"lark.sortable",options:{connectWith:!1,placeholder:null,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",items:null},_construct:function(e,r){this.overrided(e,r),r=this.options;var a,n=s(e),i=n.children(r.items),o=s(r.placeholder||t.createElement(/^(ul|ol)$/i.test(e.tagName)?"li":"div",{class:r.placeholderClass}));d(e,{source:r.items,handle:r.handle,draggingClass:r.draggingClass,preparing:function(e){},started:function(e){e.ghost=e.dragSource,e.transfer={text:"dummy"},a=(f=s(e.dragSource)).index()},ended:function(e){f&&(f.show(),p.detach(),a!=f.index()&&f.parent().trigger("sortupdate",{item:f}),f=null)}}),g(e,{started:function(e){e.acceptable=!0,e.activeClass="active",e.hoverClass="over"},overing:function(e){i.is(e.overElm)?(r.forcePlaceholderSize&&o.height(f.outerHeight()),f.hide(),s(e.overElm)[o.index()<s(e.overElm).index()?"after":"before"](o),p.not(o).detach()):p.is(e.overElm)||s(e.overElm).children(r.items).length||(p.detach(),s(e.overElm).append(o))},dropped:function(e){p.filter(":visible").after(f),f.show(),p.detach(),f=null}}),n.data("items",r.items),p=p.add(o),r.connectWith&&s(r.connectWith).add(this).data("connectWith",r.connectWith)}});return l.register(h,"sortable"),e.Sortable=h}),e("skylark-ui-interact/main",["./interact","./Draggable","./Droppable","./Movable","./Resizable","./Selectable","./Sortable"],function(e){return e}),e("skylark-ui-interact",["skylark-ui-interact/main"],function(e){return e})}(t),!n){var s=a("skylark-langx/skylark");i?module.exports=s:r.skylarkjs=s}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-ui-interact.js.map
