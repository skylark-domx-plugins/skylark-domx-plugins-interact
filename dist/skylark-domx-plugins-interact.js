/**
 * skylark-domx-plugins-interact - The interact features enhancement for dom.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(t,e){var r=e.define,require=e.require,o="function"==typeof r&&r.amd,a=!o&&"undefined"!=typeof exports;if(!o&&!r){var n={};r=e.define=function(t,e,r){"function"==typeof r?(n[t]={factory:r,deps:e.map(function(e){return function(t,e){if("."!==t[0])return t;var r=e.split("/"),o=t.split("/");r.pop();for(var a=0;a<o.length;a++)"."!=o[a]&&(".."==o[a]?r.pop():r.push(o[a]));return r.join("/")}(e,t)}),resolved:!1,exports:null},require(t)):n[t]={factory:null,resolved:!0,exports:r}},require=e.require=function(t){if(!n.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var module=n[t];if(!module.resolved){var r=[];module.deps.forEach(function(t){r.push(require(t))}),module.exports=module.factory.apply(e,r)||null,module.resolved=!0}return module.exports}}if(!r)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(t,require){t("skylark-domx-plugins-interact/rotatable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-plugins-base","./interact"],function(t,e,r,o,a,n,i,s){a.on,a.off,r.attr,r.removeAttr,o.pagePosition,n.addClass,o.height,Array.prototype.some,Array.prototype.map;function l(t,e,r){r>180&&(r=180),r<0&&(r=0),t.style.transform="rotateX("+-r+"deg) rotateY("+e+"deg)"}var c=i.Plugin.inherit({klassName:"Rotatable",pluginName:"lark.interact.rotatable",_construct:function(r,s){i.Plugin.prototype._construct.call(this,r,s);var c,u,d,p,m=(s=this.options).handle||r,f=s.document||document,k=s.starting,y=s.started,h=s.moving,g=s.stopped,v=0,x=10,b=0,w=0,P=function(t){b=t.deltaX=t.clientX-u,w=t.deltaY=t.clientY-d,u=t.clientX,d=t.clientY,l(r,v+=.1*b,x+=.1*w),t.preventDefault(),h&&h(t)},E=function(t){a.off(f,"pointermove",P).off(f,"pointerup",E),p=setInterval(function(){w*=.95,l(r,v+=.1*(b*=.95),x+=.1*b),Math.abs(b)<.5&&Math.abs(w)<.5&&clearInterval(p)},17),e.remove(c),g&&g(t)};a.on(m,"pointerdown",function(r){if("mouse"==r.pointerType&&0!==r.button)return E(r);var i,s=o.getDocumentSize(f);if(k){var l=k(r);if(!1===l)return;t.isPlainObject(l)&&(l.started&&(y=l.started),l.moving&&(h=l.moving),l.stopped&&(g=l.stopped))}r.preventDefault(),r.button,u=r.clientX,d=r.clientY,i=n.css(m,"cursor"),c=e.createElement("div"),n.css(c,{position:"absolute",top:0,left:0,width:s.width,height:s.height,zIndex:2147483647,opacity:1e-4,cursor:i}),e.append(f.body,c),clearInterval(p),a.on(f,"pointermove",P).on(f,"pointerup",E),y&&y(r)}),this._handleEl=m},remove:function(){a.off(this._handleEl)}});return i.register(c,"rotatable"),s.Rotatable=c}),t("skylark-domx-plugins-interact/Movable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-plugins-base","./interact","./mouser"],function(t,e,r,o,a,n,i,s,l){a.on,a.off,r.attr,r.removeAttr,o.pagePosition,n.addClass,o.height,Array.prototype.some,Array.prototype.map;var c=i.Plugin.inherit({klassName:"Movable",pluginName:"lark.interact.movable",_construct:function(r,a){function s(t){t.movable=d,t.moveEl=r,t.handleEl=p}i.Plugin.prototype._construct.call(this,r,a);var c,u,d=this,p=(a=this.options).handle||r,m=!1!==a.auto,f=a.constraints,k=a.document||document,y=a.starting,h=a.started,g=a.moving,v=a.stopped,x=function(t){e.remove(c),v&&v(t)};this._handleEl=p,this._mouser=new l(this._handleEl,{started:function(a){var i,l=o.getDocumentSize(k);if(s(a),y){var d=y(a);if(!1===d)return;t.isPlainObject(d)&&(d.constraints&&(f=d.constraints),d.started&&(h=d.started),d.moving&&(g=d.moving),d.stopped&&(v=d.stopped))}a.preventDefault(),a.button,u=o.relativePosition(r),o.size(r),i=n.css(p,"cursor"),c=e.createElement("div"),n.css(c,{position:"absolute",top:0,left:0,width:l.width,height:l.height,zIndex:2147483647,opacity:1e-4,cursor:i}),e.append(k.body,c),h&&h(a)},moving:function(t){if(s(t),0!==t.button)return x(t);if(m){var e=u.left+t.deltaX,a=u.top+t.deltaY;f&&(e<f.minX&&(e=f.minX),e>f.maxX&&(e=f.maxX),a<f.minY&&(a=f.minY),a>f.maxY&&(a=f.maxY))}o.relativePosition(r,{left:e,top:a}),t.preventDefault(),g&&g(t)},stopped:x})},remove:function(){this._mouser.destroy(),this._mouser=null}});return i.register(c,"movable"),s.Movable=c}),t("skylark-domx-plugins-interact/selectable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-query","./interact","./Movable"],function(t,e,r,o,a,n,i,s,l){a.on,a.off,r.attr,r.removeAttr,o.pagePosition,n.addClass,o.height,Array.prototype.some,Array.prototype.map;var c,u,d,p,m,f,k,y,h="",g={left:!0,right:!0,top:!0,bottom:!0};function v(t){t.target;p=o.size(d),f&&f(t)}function x(t){m={},g.left||g.right?m.width=p.width+t.deltaX:m.width=p.width,g.top||g.bottom?m.height=p.height+t.deltaY:m.height=p.height,o.size(d,m),o.pageRect(c,o.pageRect(d)),k&&k(t)}function b(t){y&&y(t)}function w(){return w}return t.mixin(w,{init:function(t){h=(t=t||{}).classPrefix||"";var r=t.appendTo||document.body;for(var o in c=e.createElement("div",{},{class:h+"resizer-c"}),e.append(r,c),u={},["tl","tc","tr","cl","cr","bl","bc","br"].forEach(function(t){return u[t]=e.createElement("i",{},{class:h+"resizer-h "+h+"resizer-h-"+t,"data-resize-handler":t})}),u){var a=u[o];e.append(c,a),l(a,{auto:!1,started:v,moving:x,stopped:b})}},select:function(t,e){if(t&&t===d)return;d=t,startDim=rectDim=startPos=null,o.pageRect(c,o.pageRect(d)),n.show(c)},unselect:function(t){c&&n.hide(c);d=null}}),s.Selectable=w}),t("skylark-domx-plugins-interact/scalable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-query","skylark-domx-plugins-base","./interact"],function(t,e,r,o,a,n,i,s,l){a.on,a.off,r.attr,r.removeAttr,o.pagePosition,n.addClass,o.height,Array.prototype.some,Array.prototype.map;function c(t,e){i(t).forEach(function(t){let r=i(t);var o=r.data("originalTransform");o||(o=r.css("transform"),r.data("originalTransform",o)),r.css("transform",o+" translateZ("+e+"px")})}var u=s.Plugin.inherit({klassName:"Scalable",pluginName:"lark.interact.scalable",_construct:function(t,e){s.Plugin.prototype._construct.call(this,t,e);let r=this.options.radius||0,o=this.options.targets||t;a.on(t,"mousewheel",function(t){var e=t.wheelDelta/20||-t.detail;c(o,r+=e)}),c(o,r)}});return s.register(u,"scalable"),l.Scalable=u}),t("skylark-domx-plugins-interact/main",["./interact","./mouser","./movable","./resizable","./rotatable","./rotatable","./selectable","./scalable"],function(t){return t}),t("skylark-domx-plugins-interact",["skylark-domx-plugins-interact/main"],function(t){return t})}(r),!o){var i=require("skylark-langx-ns");a?module.exports=i:e.skylarkjs=i}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-domx-plugins-interact.js.map
