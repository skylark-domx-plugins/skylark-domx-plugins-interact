/**
 * skylark-domx-plugins-interact - The interact features enhancement for dom.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(e,t){var o=t.define,require=t.require,n="function"==typeof o&&o.amd,r=!n&&"undefined"!=typeof exports;if(!n&&!o){var a={};o=t.define=function(e,t,o){"function"==typeof o?(a[e]={factory:o,deps:t.map(function(t){return function(e,t){if("."!==e[0])return e;var o=t.split("/"),n=e.split("/");o.pop();for(var r=0;r<n.length;r++)"."!=n[r]&&(".."==n[r]?o.pop():o.push(n[r]));return o.join("/")}(t,e)}),resolved:!1,exports:null},require(e)):a[e]={factory:null,resolved:!0,exports:o}},require=t.require=function(e){if(!a.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var module=a[e];if(!module.resolved){var o=[];module.deps.forEach(function(e){o.push(require(e))}),module.exports=module.factory.apply(t,o)||null,module.resolved=!0}return module.exports}}if(!o)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,require){e("skylark-domx-plugins-interact/polyfill",[],function(){}),e("skylark-domx-plugins-interact/interact",["skylark-langx/skylark","./polyfill"],function(e){return e.attach("domx.plugins.interact",{})}),e("skylark-domx-plugins-interact/movable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-plugins","./interact"],function(e,t,o,n,r,a,i,s){r.on,r.off,o.attr,o.removeAttr,n.pagePosition,a.addClass,n.height,Array.prototype.some,Array.prototype.map;var l=i.Plugin.inherit({klassName:"Movable",pluginName:"lark.movable",_construct:function(o,i){function s(e){var t,o;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),o=0;o<t.length;o++)e[t[o]]=e.changedTouches[0][t[o]]}function l(e){e.movable=p,e.moveEl=o,e.handleEl=f}this.overrided(o,i);var d,c,u,m,p=this,f=(i=this.options).handle||o,h=!1!==i.auto,k=i.constraints,g=i.document||document,v=i.starting,y=i.started,x=i.moving,b=i.stopped,X=function(e){if(s(e),l(e),0!==e.button)return Y(e);if(e.deltaX=e.screenX-c,e.deltaY=e.screenY-u,h){var t=m.left+e.deltaX,r=m.top+e.deltaY;k&&(t<k.minX&&(t=k.minX),t>k.maxX&&(t=k.maxX),r<k.minY&&(r=k.minY),r>k.maxY&&(r=k.maxY))}n.relativePosition(o,{left:t,top:r}),e.preventDefault(),x&&x(e)},Y=function(e){s(e),r.off(g,"mousemove touchmove",X).off(g,"mouseup touchend",Y),t.remove(d),b&&b(e)};r.on(f,"mousedown touchstart",function(i){var p,h=n.getDocumentSize(g);if(s(i),l(i),v){var w=v(i);if(!1===w)return;e.isPlainObject(w)&&(w.constraints&&(k=w.constraints),w.started&&(y=w.started),w.moving&&(x=w.moving),w.stopped&&(b=w.stopped))}i.preventDefault(),i.button,c=i.screenX,u=i.screenY,m=n.relativePosition(o),n.size(o),p=a.css(f,"curosr"),d=t.createElement("div"),a.css(d,{position:"absolute",top:0,left:0,width:h.width,height:h.height,zIndex:2147483647,opacity:1e-4,cursor:p}),t.append(g.body,d),r.on(g,"mousemove touchmove",X).on(g,"mouseup touchend",Y),y&&y(i)}),this._handleEl=f},remove:function(){r.off(this._handleEl)}});return i.register(l,"movable"),s.Movable=l}),e("skylark-domx-plugins-interact/Movable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-plugins","./interact"],function(e,t,o,n,r,a,i,s){r.on,r.off,o.attr,o.removeAttr,n.pagePosition,a.addClass,n.height,Array.prototype.some,Array.prototype.map;var l=i.Plugin.inherit({klassName:"Movable",pluginName:"lark.movable",_construct:function(o,i){function s(e){var t,o;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),o=0;o<t.length;o++)e[t[o]]=e.changedTouches[0][t[o]]}function l(e){e.movable=p,e.moveEl=o,e.handleEl=f}this.overrided(o,i);var d,c,u,m,p=this,f=(i=this.options).handle||o,h=!1!==i.auto,k=i.constraints,g=i.document||document,v=i.starting,y=i.started,x=i.moving,b=i.stopped,X=function(e){if(s(e),l(e),0!==e.button)return Y(e);if(e.deltaX=e.screenX-c,e.deltaY=e.screenY-u,h){var t=m.left+e.deltaX,r=m.top+e.deltaY;k&&(t<k.minX&&(t=k.minX),t>k.maxX&&(t=k.maxX),r<k.minY&&(r=k.minY),r>k.maxY&&(r=k.maxY))}n.relativePosition(o,{left:t,top:r}),e.preventDefault(),x&&x(e)},Y=function(e){s(e),r.off(g,"mousemove touchmove",X).off(g,"mouseup touchend",Y),t.remove(d),b&&b(e)};r.on(f,"mousedown touchstart",function(i){var p,h=n.getDocumentSize(g);if(s(i),l(i),v){var w=v(i);if(!1===w)return;e.isPlainObject(w)&&(w.constraints&&(k=w.constraints),w.started&&(y=w.started),w.moving&&(x=w.moving),w.stopped&&(b=w.stopped))}i.preventDefault(),i.button,c=i.screenX,u=i.screenY,m=n.relativePosition(o),n.size(o),p=a.css(f,"curosr"),d=t.createElement("div"),a.css(d,{position:"absolute",top:0,left:0,width:h.width,height:h.height,zIndex:2147483647,opacity:1e-4,cursor:p}),t.append(g.body,d),r.on(g,"mousemove touchmove",X).on(g,"mouseup touchend",Y),y&&y(i)}),this._handleEl=f},remove:function(){r.off(this._handleEl)}});return i.register(l,"movable"),s.Movable=l}),e("skylark-domx-plugins-interact/resizable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-finder","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-query","skylark-domx-plugins","./interact","./Movable"],function(e,t,o,n,r,a,i,s,l,d,c){a.on,a.off,o.attr,o.removeAttr,r.pagePosition,i.addClass,r.height,Array.prototype.some,Array.prototype.map;var u=l.Plugin.inherit({klassName:"Resizable",pluginName:"lark.resizable",options:{touchActionNone:!0,direction:{top:!1,left:!1,right:!0,bottom:!0},handle:{border:!0,grabber:"",selector:!0}},_construct:function(t,o){this.overrided(t,o);var a,i,s,l=(o=this.options).handle||{},d=o.direction,u=o.started,m=o.moving,p=o.stopped;e.isString(l)?a=n.find(t,l):e.isHtmlNode(l)&&(a=l),c(a,{auto:!1,started:function(e){i=r.size(t),u&&u(e)},moving:function(e){s={},d.left||d.right?s.width=i.width+e.deltaX:s.width=i.width,d.top||d.bottom?s.height=i.height+e.deltaY:s.height=i.height,r.size(t,s),m&&m(e)},stopped:function(e){p&&p(e)}}),this._handleEl=a},remove:function(){a.off(this._handleEl)}});return l.register(u,"resizable"),d.Resizable=u}),e("skylark-domx-plugins-interact/selectable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-query","./interact","./Movable"],function(e,t,o,n,r,a,i,s,l){r.on,r.off,o.attr,o.removeAttr,n.pagePosition,a.addClass,n.height,Array.prototype.some,Array.prototype.map;var d,c,u,m,p,f,h,k,g="",v={left:!0,right:!0,top:!0,bottom:!0};function y(e){e.target;m=n.size(u),f&&f(e)}function x(e){p={},v.left||v.right?p.width=m.width+e.deltaX:p.width=m.width,v.top||v.bottom?p.height=m.height+e.deltaY:p.height=m.height,n.size(u,p),n.pageRect(d,n.pageRect(u)),h&&h(e)}function b(e){k&&k(e)}function X(){return X}return e.mixin(X,{init:function(e){g=(e=e||{}).classPrefix||"";var o=e.appendTo||document.body;for(var n in d=t.createElement("div",{class:g+"resizer-c"}),t.append(o,d),c={},["tl","tc","tr","cl","cr","bl","bc","br"].forEach(function(e){return c[e]=t.createElement("i",{class:g+"resizer-h "+g+"resizer-h-"+e,"data-resize-handler":e})}),c){var r=c[n];t.append(d,r),l(r,{auto:!1,started:y,moving:x,stopped:b})}},select:function(e,t){if(e&&e===u)return;u=e,startDim=rectDim=startPos=null,n.pageRect(d,n.pageRect(u)),a.show(d)},unselect:function(e){d&&a.hide(d);u=null}}),s.Selectable=X}),e("skylark-domx-plugins-interact/main",["./interact","./movable","./resizable","./selectable"],function(e){return e}),e("skylark-domx-plugins-interact",["skylark-domx-plugins-interact/main"],function(e){return e})}(o),!n){var i=require("skylark-langx-ns");r?module.exports=i:t.skylarkjs=i}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-domx-plugins-interact.js.map
