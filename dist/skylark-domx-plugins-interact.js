/**
 * skylark-domx-plugins-interact - The interact features enhancement for dom.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(t,e){var r=e.define,require=e.require,i="function"==typeof r&&r.amd,o=!i&&"undefined"!=typeof exports;if(!i&&!r){var n={};r=e.define=function(t,e,r){"function"==typeof r?(n[t]={factory:r,deps:e.map(function(e){return function(t,e){if("."!==t[0])return t;var r=e.split("/"),i=t.split("/");r.pop();for(var o=0;o<i.length;o++)"."!=i[o]&&(".."==i[o]?r.pop():r.push(i[o]));return r.join("/")}(e,t)}),resolved:!1,exports:null},require(t)):n[t]={factory:null,resolved:!0,exports:r}},require=e.require=function(t){if(!n.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var module=n[t];if(!module.resolved){var r=[];module.deps.forEach(function(t){r.push(require(t))}),module.exports=module.factory.apply(e,r)||null,module.resolved=!0}return module.exports}}if(!r)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(t,require){t("skylark-domx-plugins-interact/interact",["skylark-domx-plugins-base/plugins"],function(t){"use strict";return t.interact={}}),t("skylark-domx-plugins-interact/mouser",["skylark-domx-data","skylark-domx-plugins-base","./interact"],function(t,e,r){var i=e.Plugin.inherit({klassName:"Mouser",pluginName:"lark.interact.mouser",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0,started:function(){},moving:function(){},stopped:function(){},capture:function(){return!0}},_construct:function(t,e){this.overrided(t,e),e=this.options,this._startedCallback=e.started,this._movingCallback=e.moving,this._stoppedCallback=e.stopped,this._captureCallback=e.capture,this.listenTo({mousedown:this._mouseDown,click:this._click}),this.started=!1},_click:function(e){if(!0===t.data(e.target,this.pluginName+".preventClickEvent"))return t.removeData(e.target,this.pluginName+".preventClickEvent"),e.stopImmediatePropagation(),!1},_mouseDown:function(e){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var r=this,i=1===e.which,o=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&$(e.target).closest(this.options.cancel).length;return!(i&&!o&&this._captureCallback(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._startedCallback(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.pluginName+".preventClickEvent")&&t.removeData(e.target,this.pluginName+".preventClickEvent"),this.listenTo(document,{mousemove:this._mouseMove,mouseup:this._mouseUp}),this._domx.eventer.stop(e),!0))},_mouseMove:function(t){return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._movingCallback(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._startedCallback(this._mouseDownEvent,t),this._mouseStarted?this._movingCallback(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(e){this.unlistenTo(document),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.pluginName+".preventClickEvent",!0),this._stoppedCallback(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),mouseHandled=!1,e.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet}});return e.register(i),r.Mouser=i}),t("skylark-domx-plugins-interact/movable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-plugins-base","./interact","./mouser"],function(t,e,r,i,o,n,a,s,l){o.on,o.off,r.attr,r.removeAttr,i.pagePosition,n.addClass,i.height,Array.prototype.some,Array.prototype.map;var c=a.Plugin.inherit({klassName:"Movable",pluginName:"lark.interact.movable",_construct:function(r,o){function a(t){t.movable=u,t.moveEl=r,t.handleEl=d}this.overrided(r,o);var s,c,u=this,d=(o=this.options).handle||r,m=!1!==o.auto,h=o.constraints,p=o.document||document,g=o.starting,f=o.started,k=o.moving,v=o.stopped,y=function(t){e.remove(s),v&&v(t)};this._handleEl=d,this._mouser=new l(this._handleEl,{started:function(o){var l,u=i.getDocumentSize(p);if(a(o),g){var m=g(o);if(!1===m)return;t.isPlainObject(m)&&(m.constraints&&(h=m.constraints),m.started&&(f=m.started),m.moving&&(k=m.moving),m.stopped&&(v=m.stopped))}o.preventDefault(),o.button,c=i.relativePosition(r),i.size(r),l=n.css(d,"cursor"),s=e.createElement("div"),n.css(s,{position:"absolute",top:0,left:0,width:u.width,height:u.height,zIndex:2147483647,opacity:1e-4,cursor:l}),e.append(p.body,s),f&&f(o)},moving:function(t){if(a(t),0!==t.button)return y(t);if(m){var e=c.left+t.deltaX,o=c.top+t.deltaY;h&&(e<h.minX&&(e=h.minX),e>h.maxX&&(e=h.maxX),o<h.minY&&(o=h.minY),o>h.maxY&&(o=h.maxY))}i.relativePosition(r,{left:e,top:o}),t.preventDefault(),k&&k(t)},stopped:y})},remove:function(){this._mouser.destroy(),this._mouser=null}});return a.register(c,"movable"),s.Movable=c}),t("skylark-domx-plugins-interact/resizable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-finder","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-query","skylark-domx-plugins-base","./interact","./movable"],function(t,e,r,i,o,n,a,s,l,c,u){n.on,n.off,r.attr,r.removeAttr,o.pagePosition,a.addClass,o.height,Array.prototype.some,Array.prototype.map;var d=l.Plugin.inherit({klassName:"Resizable",pluginName:"lark.interact.resizable",options:{touchActionNone:!0,handle:{border:{directions:{top:!0,left:!0,right:!0,bottom:!0,topLeft:!0,topRight:!0,bottomLeft:!0,bottomRight:!0},classes:{all:"resizable-handle",top:"resizable-handle-n",left:"resizable-handle-w",right:"resizable-handle-e",bottom:"resizable-handle-s",topLeft:"resizable-handle-nw",topRight:"resizable-handle-ne",bottomLeft:"resizable-handle-sw",bottomRight:"resizable-handle-se"}},grabber:{selector:"",direction:"bottomRight"},selector:!0},constraints:{minWidth:null,minHeight:null,maxWidth:null,maxHeight:null}},_construct:function(r,a){this.overrided(r,a);var s=(a=this.options).handle||{},l=a.constraints||{},c=a.started,d=a.moving,m=a.stopped;function h(t,e){let i;u(t,{auto:!1,started:function(t){i=o.relativeRect(r),c&&c(t)},moving:function(t){currentRect={},"right"!=e&&"topRight"!=e&&"bottomRight"!=e||(currentRect.width=i.width+t.deltaX,l.minWidth&&currentRect.width<l.minWidth&&(currentRect.width=l.minWidth),l.maxWidth&&currentRect.width>l.maxWidth&&(currentRect.width=l.maxWidth)),"bottom"!=e&&"bottomLeft"!=e&&"bottomRight"!=e||(currentRect.height=i.height+t.deltaY,l.minHeight&&currentRect.height<l.minHeight&&(currentRect.height=l.minHeight),l.maxHeight&&currentRect.height>l.maxHeight&&(currentRect.height=l.maxHeight)),"left"!=e&&"topLeft"!=e&&"bottomLeft"!=e||(currentRect.left=i.left+t.deltaX,currentRect.width=i.width-t.deltaX,l.minWidth&&currentRect.width<l.minWidth&&(currentRect.left=currentRect.left+currentRect.width-l.minWidth,currentRect.width=l.minWidth),l.maxWidth&&currentRect.width>l.maxWidth&&(currentRect.left=currentRect.left+currentRect.width-l.maxWidth,currentRect.width=l.maxWidth)),"top"!=e&&"topLeft"!=e&&"topRight"!=e||(currentRect.top=i.top+t.deltaY,currentRect.height=i.height-t.deltaY,l.minHeight&&currentRect.height<l.minHeight&&(currentRect.top=currentRect.top+currentRect.height-l.minHeight,currentRect.height=l.minHeight),l.maxHeight&&currentRect.height>l.maxHeight&&(currentRect.top=currentRect.top+currentRect.height-l.maxHeight,currentRect.height=l.maxHeight)),o.relativeRect(r,currentRect),d&&d(t),n.resized(r)},stopped:function(t){m&&m(t)}})}if(t.isString(s)?handleEl=i.find(r,s):t.isHtmlNode(s)&&(handleEl=s),s&&s.border){for(var p in s.border.directions)if(s.border.directions[p]){let t=e.createElement("div",{className:s.border.classes.all+" "+s.border.classes[p],direction:p},r);h(t,p)}}if(s&&s.grabber&&s.grabber.selector){let t=i.find(r,s.grabber.selector);h(t,s.grabber.direction)}},remove:function(){n.off(this._handleEl)}});return l.register(d,"resizable"),c.Resizable=d}),t("skylark-domx-plugins-interact/rotatable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-plugins-base","./interact"],function(t,e,r,i,o,n,a,s){o.on,o.off,r.attr,r.removeAttr,i.pagePosition,n.addClass,i.height,Array.prototype.some,Array.prototype.map;function l(t,e,r){r>180&&(r=180),r<0&&(r=0),t.style.transform="rotateX("+-r+"deg) rotateY("+e+"deg)"}var c=a.Plugin.inherit({klassName:"Rotatable",pluginName:"lark.interact.rotatable",_construct:function(r,a){this.overrided(r,a);var s,c,u,d,m=(a=this.options).handle||r,h=a.document||document,p=a.starting,g=a.started,f=a.moving,k=a.stopped,v=0,y=10,b=0,x=0,_=function(t){b=t.deltaX=t.clientX-c,x=t.deltaY=t.clientY-u,c=t.clientX,u=t.clientY,l(r,v+=.1*b,y+=.1*x),t.preventDefault(),f&&f(t)},R=function(t){o.off(h,"pointermove",_).off(h,"pointerup",R),d=setInterval(function(){x*=.95,l(r,v+=.1*(b*=.95),y+=.1*b),Math.abs(b)<.5&&Math.abs(x)<.5&&clearInterval(d)},17),e.remove(s),k&&k(t)};o.on(m,"pointerdown",function(r){if("mouse"==r.pointerType&&0!==r.button)return R(r);var a,l=i.getDocumentSize(h);if(p){var v=p(r);if(!1===v)return;t.isPlainObject(v)&&(v.started&&(g=v.started),v.moving&&(f=v.moving),v.stopped&&(k=v.stopped))}r.preventDefault(),r.button,c=r.clientX,u=r.clientY,a=n.css(m,"cursor"),s=e.createElement("div"),n.css(s,{position:"absolute",top:0,left:0,width:l.width,height:l.height,zIndex:2147483647,opacity:1e-4,cursor:a}),e.append(h.body,s),clearInterval(d),o.on(h,"pointermove",_).on(h,"pointerup",R),g&&g(r)}),this._handleEl=m},remove:function(){o.off(this._handleEl)}});return a.register(c,"rotatable"),s.Rotatable=c}),t("skylark-domx-plugins-interact/Movable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-plugins-base","./interact","./mouser"],function(t,e,r,i,o,n,a,s,l){o.on,o.off,r.attr,r.removeAttr,i.pagePosition,n.addClass,i.height,Array.prototype.some,Array.prototype.map;var c=a.Plugin.inherit({klassName:"Movable",pluginName:"lark.interact.movable",_construct:function(r,o){function a(t){t.movable=u,t.moveEl=r,t.handleEl=d}this.overrided(r,o);var s,c,u=this,d=(o=this.options).handle||r,m=!1!==o.auto,h=o.constraints,p=o.document||document,g=o.starting,f=o.started,k=o.moving,v=o.stopped,y=function(t){e.remove(s),v&&v(t)};this._handleEl=d,this._mouser=new l(this._handleEl,{started:function(o){var l,u=i.getDocumentSize(p);if(a(o),g){var m=g(o);if(!1===m)return;t.isPlainObject(m)&&(m.constraints&&(h=m.constraints),m.started&&(f=m.started),m.moving&&(k=m.moving),m.stopped&&(v=m.stopped))}o.preventDefault(),o.button,c=i.relativePosition(r),i.size(r),l=n.css(d,"cursor"),s=e.createElement("div"),n.css(s,{position:"absolute",top:0,left:0,width:u.width,height:u.height,zIndex:2147483647,opacity:1e-4,cursor:l}),e.append(p.body,s),f&&f(o)},moving:function(t){if(a(t),0!==t.button)return y(t);if(m){var e=c.left+t.deltaX,o=c.top+t.deltaY;h&&(e<h.minX&&(e=h.minX),e>h.maxX&&(e=h.maxX),o<h.minY&&(o=h.minY),o>h.maxY&&(o=h.maxY))}i.relativePosition(r,{left:e,top:o}),t.preventDefault(),k&&k(t)},stopped:y})},remove:function(){this._mouser.destroy(),this._mouser=null}});return a.register(c,"movable"),s.Movable=c}),t("skylark-domx-plugins-interact/selectable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-query","./interact","./Movable"],function(t,e,r,i,o,n,a,s,l){o.on,o.off,r.attr,r.removeAttr,i.pagePosition,n.addClass,i.height,Array.prototype.some,Array.prototype.map;var c,u,d,m,h,p,g,f,k="",v={left:!0,right:!0,top:!0,bottom:!0};function y(t){t.target;m=i.size(d),p&&p(t)}function b(t){h={},v.left||v.right?h.width=m.width+t.deltaX:h.width=m.width,v.top||v.bottom?h.height=m.height+t.deltaY:h.height=m.height,i.size(d,h),i.pageRect(c,i.pageRect(d)),g&&g(t)}function x(t){f&&f(t)}function _(){return _}return t.mixin(_,{init:function(t){k=(t=t||{}).classPrefix||"";var r=t.appendTo||document.body;for(var i in c=e.createElement("div",{},{class:k+"resizer-c"}),e.append(r,c),u={},["tl","tc","tr","cl","cr","bl","bc","br"].forEach(function(t){return u[t]=e.createElement("i",{},{class:k+"resizer-h "+k+"resizer-h-"+t,"data-resize-handler":t})}),u){var o=u[i];e.append(c,o),l(o,{auto:!1,started:y,moving:b,stopped:x})}},select:function(t,e){if(t&&t===d)return;d=t,startDim=rectDim=startPos=null,i.pageRect(c,i.pageRect(d)),n.show(c)},unselect:function(t){c&&n.hide(c);d=null}}),s.Selectable=_}),t("skylark-domx-plugins-interact/scalable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-query","skylark-domx-plugins-base","./interact"],function(t,e,r,i,o,n,a,s,l){o.on,o.off,r.attr,r.removeAttr,i.pagePosition,n.addClass,i.height,Array.prototype.some,Array.prototype.map;function c(t,e){a(t).forEach(function(t){let r=a(t);var i=r.data("originalTransform");i||(i=r.css("transform"),r.data("originalTransform",i)),r.css("transform",i+" translateZ("+e+"px")})}var u=s.Plugin.inherit({klassName:"Scalable",pluginName:"lark.interact.scalable",_construct:function(t,e){this.overrided(t,e);let r=this.options.radius||0,i=this.options.targets||t;o.on(t,"mousewheel",function(t){var e=t.wheelDelta/20||-t.detail;c(i,r+=e)}),c(i,r)}});return s.register(u,"scalable"),l.Scalable=u}),t("skylark-domx-plugins-interact/main",["./interact","./mouser","./movable","./resizable","./rotatable","./rotatable","./selectable","./scalable"],function(t){return t}),t("skylark-domx-plugins-interact",["skylark-domx-plugins-interact/main"],function(t){return t})}(r),!i){var a=require("skylark-langx-ns");o?module.exports=a:e.skylarkjs=a}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-domx-plugins-interact.js.map
