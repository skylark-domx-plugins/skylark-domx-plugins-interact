/**
 * skylark-domx-plugins-interact - The interact features enhancement for dom.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(t,e){var r=e.define,require=e.require,n="function"==typeof r&&r.amd,o=!n&&"undefined"!=typeof exports;if(!n&&!r){var i={};r=e.define=function(t,e,r){"function"==typeof r?(i[t]={factory:r,deps:e.map(function(e){return function(t,e){if("."!==t[0])return t;var r=e.split("/"),n=t.split("/");r.pop();for(var o=0;o<n.length;o++)"."!=n[o]&&(".."==n[o]?r.pop():r.push(n[o]));return r.join("/")}(e,t)}),resolved:!1,exports:null},require(t)):i[t]={factory:null,resolved:!0,exports:r}},require=e.require=function(t){if(!i.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var module=i[t];if(!module.resolved){var r=[];module.deps.forEach(function(t){r.push(require(t))}),module.exports=module.factory.apply(e,r)||null,module.resolved=!0}return module.exports}}if(!r)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(t,require){t("skylark-domx-plugins-interact/interact",["skylark-langx/skylark"],function(t){return t.attach("domx.plugins.interact",{})}),t("skylark-domx-plugins-interact/movable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-plugins-base","./interact"],function(t,e,r,n,o,i,a,s){o.on,o.off,r.attr,r.removeAttr,n.pagePosition,i.addClass,n.height,Array.prototype.some,Array.prototype.map;var l=a.Plugin.inherit({klassName:"Movable",pluginName:"lark.interact.movable",_construct:function(r,a){function s(t){var e,r;if(t.changedTouches)for(e="screenX screenY pageX pageY clientX clientY".split(" "),r=0;r<e.length;r++)t[e[r]]=t.changedTouches[0][e[r]]}function l(t){t.movable=m,t.moveEl=r,t.handleEl=p}this.overrided(r,a);var c,d,u,h,m=this,p=(a=this.options).handle||r,f=!1!==a.auto,g=a.constraints,v=a.document||document,k=a.starting,y=a.started,b=a.moving,x=a.stopped,R=function(t){if(s(t),l(t),0!==t.button)return w(t);if(t.deltaX=t.screenX-d,t.deltaY=t.screenY-u,f){var e=h.left+t.deltaX,o=h.top+t.deltaY;g&&(e<g.minX&&(e=g.minX),e>g.maxX&&(e=g.maxX),o<g.minY&&(o=g.minY),o>g.maxY&&(o=g.maxY))}n.relativePosition(r,{left:e,top:o}),t.preventDefault(),b&&b(t)},w=function(t){s(t),o.off(v,"mousemove touchmove",R).off(v,"mouseup touchend",w),e.remove(c),x&&x(t)};o.on(p,"mousedown touchstart",function(a){var m,f=n.getDocumentSize(v);if(s(a),l(a),k){var X=k(a);if(!1===X)return;t.isPlainObject(X)&&(X.constraints&&(g=X.constraints),X.started&&(y=X.started),X.moving&&(b=X.moving),X.stopped&&(x=X.stopped))}a.preventDefault(),a.button,d=a.screenX,u=a.screenY,h=n.relativePosition(r),n.size(r),m=i.css(p,"cursor"),c=e.createElement("div"),i.css(c,{position:"absolute",top:0,left:0,width:f.width,height:f.height,zIndex:2147483647,opacity:1e-4,cursor:m}),e.append(v.body,c),o.on(v,"mousemove touchmove",R).on(v,"mouseup touchend",w),y&&y(a)}),this._handleEl=p},remove:function(){o.off(this._handleEl)}});return a.register(l,"movable"),s.Movable=l}),t("skylark-domx-plugins-interact/resizable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-finder","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-query","skylark-domx-plugins-base","./interact","./movable"],function(t,e,r,n,o,i,a,s,l,c,d){i.on,i.off,r.attr,r.removeAttr,o.pagePosition,a.addClass,o.height,Array.prototype.some,Array.prototype.map;var u=l.Plugin.inherit({klassName:"Resizable",pluginName:"lark.interact.resizable",options:{touchActionNone:!0,handle:{border:{directions:{top:!0,left:!0,right:!0,bottom:!0,topLeft:!0,topRight:!0,bottomLeft:!0,bottomRight:!0},classes:{all:"resizable-handle",top:"resizable-handle-n",left:"resizable-handle-w",right:"resizable-handle-e",bottom:"resizable-handle-s",topLeft:"resizable-handle-nw",topRight:"resizable-handle-ne",bottomLeft:"resizable-handle-sw",bottomRight:"resizable-handle-se"}},grabber:{selector:"",direction:"bottomRight"},selector:!0},constraints:{minWidth:null,minHeight:null,maxWidth:null,maxHeight:null}},_construct:function(r,a){this.overrided(r,a);var s=(a=this.options).handle||{},l=a.constraints||{},c=a.started,u=a.moving,h=a.stopped;function m(t,e){let n;d(t,{auto:!1,started:function(t){n=o.relativeRect(r),c&&c(t)},moving:function(t){currentRect={},"right"!=e&&"topRight"!=e&&"bottomRight"!=e||(currentRect.width=n.width+t.deltaX,l.minWidth&&currentRect.width<l.minWidth&&(currentRect.width=l.minWidth),l.maxWidth&&currentRect.width>l.maxWidth&&(currentRect.width=l.maxWidth)),"bottom"!=e&&"bottomLeft"!=e&&"bottomRight"!=e||(currentRect.height=n.height+t.deltaY,l.minHeight&&currentRect.height<l.minHeight&&(currentRect.height=l.minHeight),l.maxHeight&&currentRect.height>l.maxHeight&&(currentRect.height=l.maxHeight)),"left"!=e&&"topLeft"!=e&&"bottomLeft"!=e||(currentRect.left=n.left+t.deltaX,currentRect.width=n.width-t.deltaX,l.minWidth&&currentRect.width<l.minWidth&&(currentRect.left=currentRect.left+currentRect.width-l.minWidth,currentRect.width=l.minWidth),l.maxWidth&&currentRect.width>l.maxWidth&&(currentRect.left=currentRect.left+currentRect.width-l.maxWidth,currentRect.width=l.maxWidth)),"top"!=e&&"topLeft"!=e&&"topRight"!=e||(currentRect.top=n.top+t.deltaY,currentRect.height=n.height-t.deltaY,l.minHeight&&currentRect.height<l.minHeight&&(currentRect.top=currentRect.top+currentRect.height-l.minHeight,currentRect.height=l.minHeight),l.maxHeight&&currentRect.height>l.maxHeight&&(currentRect.top=currentRect.top+currentRect.height-l.maxHeight,currentRect.height=l.maxHeight)),o.relativeRect(r,currentRect),u&&u(t),i.resized(r)},stopped:function(t){h&&h(t)}})}if(t.isString(s)?handleEl=n.find(r,s):t.isHtmlNode(s)&&(handleEl=s),s&&s.border){for(var p in s.border.directions)if(s.border.directions[p]){let t=e.createElement("div",{className:s.border.classes.all+" "+s.border.classes[p],direction:p},r);m(t,p)}}if(s&&s.grabber&&s.grabber.selector){let t=n.find(r,s.grabber.selector);m(t,s.grabber.direction)}},remove:function(){i.off(this._handleEl)}});return l.register(u,"resizable"),c.Resizable=u}),t("skylark-domx-plugins-interact/rotatable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-plugins-base","./interact"],function(t,e,r,n,o,i,a,s){o.on,o.off,r.attr,r.removeAttr,n.pagePosition,i.addClass,n.height,Array.prototype.some,Array.prototype.map;function l(t,e,r){r>180&&(r=180),r<0&&(r=0),t.style.transform="rotateX("+-r+"deg) rotateY("+e+"deg)"}var c=a.Plugin.inherit({klassName:"Rotatable",pluginName:"lark.interact.rotatable",_construct:function(r,a){this.overrided(r,a);var s,c,d,u,h=(a=this.options).handle||r,m=a.document||document,p=a.starting,f=a.started,g=a.moving,v=a.stopped,k=0,y=10,b=0,x=0,R=function(t){b=t.deltaX=t.clientX-c,x=t.deltaY=t.clientY-d,c=t.clientX,d=t.clientY,l(r,k+=.1*b,y+=.1*x),t.preventDefault(),g&&g(t)},w=function(t){o.off(m,"pointermove",R).off(m,"pointerup",w),u=setInterval(function(){x*=.95,l(r,k+=.1*(b*=.95),y+=.1*b),Math.abs(b)<.5&&Math.abs(x)<.5&&clearInterval(u)},17),e.remove(s),v&&v(t)};o.on(h,"pointerdown",function(r){if("mouse"==r.pointerType&&0!==r.button)return w(r);var a,l=n.getDocumentSize(m);if(p){var k=p(r);if(!1===k)return;t.isPlainObject(k)&&(k.started&&(f=k.started),k.moving&&(g=k.moving),k.stopped&&(v=k.stopped))}r.preventDefault(),r.button,c=r.clientX,d=r.clientY,a=i.css(h,"cursor"),s=e.createElement("div"),i.css(s,{position:"absolute",top:0,left:0,width:l.width,height:l.height,zIndex:2147483647,opacity:1e-4,cursor:a}),e.append(m.body,s),clearInterval(u),o.on(m,"pointermove",R).on(m,"pointerup",w),f&&f(r)}),this._handleEl=h},remove:function(){o.off(this._handleEl)}});return a.register(c,"rotatable"),s.Rotatable=c}),t("skylark-domx-plugins-interact/Movable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-plugins-base","./interact"],function(t,e,r,n,o,i,a,s){o.on,o.off,r.attr,r.removeAttr,n.pagePosition,i.addClass,n.height,Array.prototype.some,Array.prototype.map;var l=a.Plugin.inherit({klassName:"Movable",pluginName:"lark.interact.movable",_construct:function(r,a){function s(t){var e,r;if(t.changedTouches)for(e="screenX screenY pageX pageY clientX clientY".split(" "),r=0;r<e.length;r++)t[e[r]]=t.changedTouches[0][e[r]]}function l(t){t.movable=m,t.moveEl=r,t.handleEl=p}this.overrided(r,a);var c,d,u,h,m=this,p=(a=this.options).handle||r,f=!1!==a.auto,g=a.constraints,v=a.document||document,k=a.starting,y=a.started,b=a.moving,x=a.stopped,R=function(t){if(s(t),l(t),0!==t.button)return w(t);if(t.deltaX=t.screenX-d,t.deltaY=t.screenY-u,f){var e=h.left+t.deltaX,o=h.top+t.deltaY;g&&(e<g.minX&&(e=g.minX),e>g.maxX&&(e=g.maxX),o<g.minY&&(o=g.minY),o>g.maxY&&(o=g.maxY))}n.relativePosition(r,{left:e,top:o}),t.preventDefault(),b&&b(t)},w=function(t){s(t),o.off(v,"mousemove touchmove",R).off(v,"mouseup touchend",w),e.remove(c),x&&x(t)};o.on(p,"mousedown touchstart",function(a){var m,f=n.getDocumentSize(v);if(s(a),l(a),k){var X=k(a);if(!1===X)return;t.isPlainObject(X)&&(X.constraints&&(g=X.constraints),X.started&&(y=X.started),X.moving&&(b=X.moving),X.stopped&&(x=X.stopped))}a.preventDefault(),a.button,d=a.screenX,u=a.screenY,h=n.relativePosition(r),n.size(r),m=i.css(p,"cursor"),c=e.createElement("div"),i.css(c,{position:"absolute",top:0,left:0,width:f.width,height:f.height,zIndex:2147483647,opacity:1e-4,cursor:m}),e.append(v.body,c),o.on(v,"mousemove touchmove",R).on(v,"mouseup touchend",w),y&&y(a)}),this._handleEl=p},remove:function(){o.off(this._handleEl)}});return a.register(l,"movable"),s.Movable=l}),t("skylark-domx-plugins-interact/selectable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-query","./interact","./Movable"],function(t,e,r,n,o,i,a,s,l){o.on,o.off,r.attr,r.removeAttr,n.pagePosition,i.addClass,n.height,Array.prototype.some,Array.prototype.map;var c,d,u,h,m,p,f,g,v="",k={left:!0,right:!0,top:!0,bottom:!0};function y(t){t.target;h=n.size(u),p&&p(t)}function b(t){m={},k.left||k.right?m.width=h.width+t.deltaX:m.width=h.width,k.top||k.bottom?m.height=h.height+t.deltaY:m.height=h.height,n.size(u,m),n.pageRect(c,n.pageRect(u)),f&&f(t)}function x(t){g&&g(t)}function R(){return R}return t.mixin(R,{init:function(t){v=(t=t||{}).classPrefix||"";var r=t.appendTo||document.body;for(var n in c=e.createElement("div",{class:v+"resizer-c"}),e.append(r,c),d={},["tl","tc","tr","cl","cr","bl","bc","br"].forEach(function(t){return d[t]=e.createElement("i",{class:v+"resizer-h "+v+"resizer-h-"+t,"data-resize-handler":t})}),d){var o=d[n];e.append(c,o),l(o,{auto:!1,started:y,moving:b,stopped:x})}},select:function(t,e){if(t&&t===u)return;u=t,startDim=rectDim=startPos=null,n.pageRect(c,n.pageRect(u)),i.show(c)},unselect:function(t){c&&i.hide(c);u=null}}),s.Selectable=R}),t("skylark-domx-plugins-interact/main",["./interact","./movable","./resizable","./rotatable","./selectable"],function(t){return t}),t("skylark-domx-plugins-interact",["skylark-domx-plugins-interact/main"],function(t){return t})}(r),!n){var a=require("skylark-langx-ns");o?module.exports=a:e.skylarkjs=a}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-domx-plugins-interact.js.map
