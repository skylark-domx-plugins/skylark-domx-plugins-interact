/**
 * skylark-domx-plugins-interact - The interact features enhancement for dom.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(e,r){var t=r.define,require=r.require,a="function"==typeof t&&t.amd,n=!a&&"undefined"!=typeof exports;if(!a&&!t){var o={};t=r.define=function(e,r,t){"function"==typeof t?(o[e]={factory:t,deps:r.map(function(r){return function(e,r){if("."!==e[0])return e;var t=r.split("/"),a=e.split("/");t.pop();for(var n=0;n<a.length;n++)"."!=a[n]&&(".."==a[n]?t.pop():t.push(a[n]));return t.join("/")}(r,e)}),resolved:!1,exports:null},require(e)):o[e]={factory:null,resolved:!0,exports:t}},require=r.require=function(e){if(!o.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var module=o[e];if(!module.resolved){var t=[];module.deps.forEach(function(e){t.push(require(e))}),module.exports=module.factory.apply(r,t)||null,module.resolved=!0}return module.exports}}if(!t)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,require){e("skylark-domx-plugins-interact/polyfill",[],function(){}),e("skylark-domx-plugins-interact/interact",["skylark-langx/skylark","./polyfill"],function(e){return e.attach("domx.interact",{})}),e("skylark-domx-plugins-interact/ddmanager",["./interact","skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-finder","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler"],function(e,r,t,a,n,o,i,s){i.on,i.off,a.attr,a.removeAttr,o.pagePosition,s.addClass,o.height;var d=e.DndManager=r.Evented.inherit({klassName:"DndManager",init:function(){},prepare:function(e){var r=i.create("preparing",{dragSource:e.dragSource,dragHandle:e.dragHandle});e.trigger(r),e.dragSource=r.dragSource},start:function(e,t){var a=o.pagePosition(e.dragSource);this.draggingOffsetX=parseInt(t.pageX-a.left),this.draggingOffsetY=parseInt(t.pageY-a.top);var n=i.create("started",{elm:e.elm,dragSource:e.dragSource,dragHandle:e.dragHandle,ghost:null,transfer:{}});e.trigger(n),this.dragging=e,e.draggingClass&&s.addClass(e.dragSource,e.draggingClass),this.draggingGhost=n.ghost,this.draggingGhost||(this.draggingGhost=e.elm),this.draggingTransfer=n.transfer,this.draggingTransfer&&r.each(this.draggingTransfer,function(e,r){t.dataTransfer.setData(e,r)}),t.dataTransfer.setDragImage(this.draggingGhost,this.draggingOffsetX,this.draggingOffsetY),t.dataTransfer.effectAllowed="copyMove";var d=i.create("dndStarted",{elm:n.elm,dragSource:n.dragSource,dragHandle:n.dragHandle,ghost:n.ghost,transfer:n.transfer});this.trigger(d)},over:function(){},end:function(e){var r=this.dragging;r&&r.draggingClass&&s.removeClass(r.dragSource,r.draggingClass);var t=i.create("dndEnded",{});this.trigger(t),this.dragging=null,this.draggingTransfer=null,this.draggingGhost=null,this.draggingOffsetX=null,this.draggingOffsetY=null}}),l=new d;return l}),e("skylark-domx-plugins-interact/Draggable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-finder","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-plugins","./interact","./ddmanager"],function(e,r,t,a,n,o,i,s,d,l){o.on,o.off,t.attr,t.removeAttr,n.pagePosition,i.addClass,n.height;var g=s.Plugin.inherit({klassName:"Draggable",pluginName:"lark.draggable",options:{draggingClass:"dragging"},_construct:function(r,n){this.overrided(r,n);var i=this,n=this.options;i.draggingClass=n.draggingClass,["preparing","started","ended","moving"].forEach(function(r){e.isFunction(n[r])&&i.on(r,n[r])}),o.on(r,{mousedown:function(e){var r=i.options;r.handle&&(i.dragHandle=a.closest(e.target,r.handle),!i.dragHandle)||(r.source?i.dragSource=a.closest(e.target,r.source):i.dragSource=i._elm,l.prepare(i),i.dragSource&&t.attr(i.dragSource,"draggable","true"))},mouseup:function(e){i.dragSource&&(i.dragSource=null,i.dragHandle=null)},dragstart:function(e){t.attr(i.dragSource,"draggable","false"),l.start(i,e)},dragend:function(e){o.stop(e),l.dragging&&l.end(!1)}})}});return s.register(g,"draggable"),d.Draggable=g}),e("skylark-domx-plugins-interact/Droppable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-finder","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-plugins","./interact","./ddmanager"],function(e,r,t,a,n,o,i,s,d,l){o.on,o.off,t.attr,t.removeAttr,n.pagePosition,i.addClass,n.height;var g=s.Plugin.inherit({klassName:"Droppable",pluginName:"lark.droppable",options:{draggingClass:"dragging"},_construct:function(r,t){this.overrided(r,t);var a,n,s=this,t=s.options,d=(t.draggingClass,!0);["started","entered","leaved","dropped","overing"].forEach(function(r){e.isFunction(t[r])&&s.on(r,t[r])}),o.on(r,{dragover:function(e){if(e.stopPropagation(),d){var r=o.create("overing",{overElm:e.target,transfer:l.draggingTransfer,acceptable:!0});s.trigger(r),r.acceptable&&(e.preventDefault(),e.dataTransfer.dropEffect="copyMove")}},dragenter:function(e){s.options;var r=s._elm,t=o.create("entered",{transfer:l.draggingTransfer});s.trigger(t),e.stopPropagation(),a&&d&&i.addClass(r,a)},dragleave:function(e){s.options;var r=s._elm;if(!d)return!1;var t=o.create("leaved",{transfer:l.draggingTransfer});s.trigger(t),e.stopPropagation(),a&&d&&i.removeClass(r,a)},drop:function(e){s.options;var r=s._elm;if(o.stop(e),l.dragging){a&&d&&i.addClass(r,a);var t=o.create("dropped",{transfer:l.draggingTransfer});s.trigger(t),l.end(!0)}}}),l.on("dndStarted",function(e){var t=o.create("started",{transfer:l.draggingTransfer,acceptable:!1});s.trigger(t),d=t.acceptable,a=t.hoverClass,(n=t.activeClass)&&d&&i.addClass(r,n)}).on("dndEnded",function(e){var t=o.create("ended",{transfer:l.draggingTransfer,acceptable:!1});s.trigger(t),a&&d&&i.removeClass(r,a),n&&d&&i.removeClass(r,n),d=!1,n=null,a=null})}});return s.register(g,"droppable"),d.Droppable=g}),e("skylark-domx-plugins-interact/Movable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-plugins","./interact"],function(e,r,t,a,n,o,i,s){n.on,n.off,t.attr,t.removeAttr,a.pagePosition,o.addClass,a.height,Array.prototype.some,Array.prototype.map;var d=i.Plugin.inherit({klassName:"Movable",pluginName:"lark.movable",_construct:function(e,t){function i(e){var r,t;if(e.changedTouches)for(r="screenX screenY pageX pageY clientX clientY".split(" "),t=0;t<r.length;t++)e[r[t]]=e.changedTouches[0][r[t]]}this.overrided(e,t);var s,d,l,g,c=(t=this.options).handle||e,u=!1!==t.auto,f=t.constraints,p=t.document||document,m=t.started,h=t.moving,k=t.stopped,v=function(r){if(i(r),0!==r.button)return y(r);if(r.deltaX=r.screenX-d,r.deltaY=r.screenY-l,u){var t=g.left+r.deltaX,n=g.top+r.deltaY;f&&(t<f.minX&&(t=f.minX),t>f.maxX&&(t=f.maxX),n<f.minY&&(n=f.minY),n>f.maxY&&(n=f.maxY))}a.relativePosition(e,{left:t,top:n}),r.preventDefault(),h&&h(r)},y=function(e){i(e),n.off(p,"mousemove touchmove",v).off(p,"mouseup touchend",y),r.remove(s),k&&k(e)};n.on(c,"mousedown touchstart",function(t){var u,f=a.getDocumentSize(p);i(t),t.preventDefault(),t.button,d=t.screenX,l=t.screenY,g=a.relativePosition(e),a.size(e),u=o.css(c,"curosr"),s=r.createElement("div"),o.css(s,{position:"absolute",top:0,left:0,width:f.width,height:f.height,zIndex:2147483647,opacity:1e-4,cursor:u}),r.append(p.body,s),n.on(p,"mousemove touchmove",v).on(p,"mouseup touchend",y),m&&m(t)}),this._handleEl=c},remove:function(){n.off(this._handleEl)}});return i.register(d,"movable"),s.Movable=d}),e("skylark-domx-plugins-interact/Resizable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-finder","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-query","skylark-domx-plugins","./interact","./Movable"],function(e,r,t,a,n,o,i,s,d,l,g){o.on,o.off,t.attr,t.removeAttr,n.pagePosition,i.addClass,n.height,Array.prototype.some,Array.prototype.map;var c=d.Plugin.inherit({klassName:"Resizable",pluginName:"lark.resizable",options:{touchActionNone:!0,direction:{top:!1,left:!1,right:!0,bottom:!0},handle:{border:!0,grabber:"",selector:!0}},_construct:function(r,t){this.overrided(r,t);var o,i,s,d=(t=this.options).handle||{},l=t.direction,c=t.started,u=t.moving,f=t.stopped;e.isString(d)?o=a.find(r,d):e.isHtmlNode(d)&&(o=d),g(o,{auto:!1,started:function(e){i=n.size(r),c&&c(e)},moving:function(e){s={},l.left||l.right?s.width=i.width+e.deltaX:s.width=i.width,l.top||l.bottom?s.height=i.height+e.deltaY:s.height=i.height,n.size(r,s),u&&u(e)},stopped:function(e){f&&f(e)}}),this._handleEl=o},remove:function(){o.off(this._handleEl)}});return d.register(c,"resizable"),l.Resizable=c}),e("skylark-domx-plugins-interact/Selectable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-query","./interact","./Movable"],function(e,r,t,a,n,o,i,s,d){n.on,n.off,t.attr,t.removeAttr,a.pagePosition,o.addClass,a.height,Array.prototype.some,Array.prototype.map;var l,g,c,u,f,p,m,h,k="",v={left:!0,right:!0,top:!0,bottom:!0};function y(e){e.target;u=a.size(c),p&&p(e)}function x(e){f={},v.left||v.right?f.width=u.width+e.deltaX:f.width=u.width,v.top||v.bottom?f.height=u.height+e.deltaY:f.height=u.height,a.size(c,f),a.pageRect(l,a.pageRect(c)),m&&m(e)}function b(e){h&&h(e)}function C(){return C}return e.mixin(C,{init:function(e){k=(e=e||{}).classPrefix||"";var t=e.appendTo||document.body;for(var a in l=r.createElement("div",{class:k+"resizer-c"}),r.append(t,l),g={},["tl","tc","tr","cl","cr","bl","bc","br"].forEach(function(e){return g[e]=r.createElement("i",{class:k+"resizer-h "+k+"resizer-h-"+e,"data-resize-handler":e})}),g){var n=g[a];r.append(l,n),d(n,{auto:!1,started:y,moving:x,stopped:b})}},select:function(e,r){if(e&&e===c)return;c=e,startDim=rectDim=startPos=null,a.pageRect(l,a.pageRect(c)),o.show(l)},unselect:function(e){l&&o.hide(l);c=null}}),s.Selectable=C}),e("skylark-domx-plugins-interact/main",["./interact","./Draggable","./Droppable","./Movable","./Resizable","./Selectable"],function(e){return e}),e("skylark-domx-plugins-interact",["skylark-domx-plugins-interact/main"],function(e){return e})}(t),!a){var i=require("skylark-langx-ns");n?module.exports=i:r.skylarkjs=i}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-domx-plugins-interact.js.map
