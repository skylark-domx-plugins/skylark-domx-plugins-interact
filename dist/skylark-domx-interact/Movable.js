/**
 * skylark-domx-interact - The interact features enhancement for dom.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-langx/langx","skylark-utils-dom/noder","skylark-utils-dom/datax","skylark-utils-dom/geom","skylark-utils-dom/eventer","skylark-utils-dom/styler","skylark-utils-dom/plugins","./interact"],function(e,t,o,n,a,i,s,r){a.on,a.off,o.attr,o.removeAttr,n.pagePosition,i.addClass,n.height,Array.prototype.some,Array.prototype.map;var l=s.Plugin.inherit({klassName:"Movable",pluginName:"lark.movable",_construct:function(e,o){function s(e){var t,o;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),o=0;o<t.length;o++)e[t[o]]=e.changedTouches[0][t[o]]}this.overrided(e,o);var r,l,u,m,c=(o=this.options).handle||e,d=!1!==o.auto,h=o.constraints,f=o.document||document,p=o.started,v=o.moving,g=o.stopped,k=function(t){if(s(t),0!==t.button)return y(t);if(t.deltaX=t.screenX-l,t.deltaY=t.screenY-u,d){var o=m.left+t.deltaX,a=m.top+t.deltaY;h&&(o<h.minX&&(o=h.minX),o>h.maxX&&(o=h.maxX),a<h.minY&&(a=h.minY),a>h.maxY&&(a=h.maxY))}n.relativePosition(e,{left:o,top:a}),t.preventDefault(),v&&v(t)},y=function(e){s(e),a.off(f,"mousemove touchmove",k).off(f,"mouseup touchend",y),t.remove(r),g&&g(e)};a.on(c,"mousedown touchstart",function(o){var d,h=n.getDocumentSize(f);s(o),o.preventDefault(),o.button,l=o.screenX,u=o.screenY,m=n.relativePosition(e),n.size(e),d=i.css(c,"curosr"),r=t.createElement("div"),i.css(r,{position:"absolute",top:0,left:0,width:h.width,height:h.height,zIndex:2147483647,opacity:1e-4,cursor:d}),t.append(f.body,r),a.on(f,"mousemove touchmove",k).on(f,"mouseup touchend",y),p&&p(o)}),this._handleEl=c},remove:function(){a.off(this._handleEl)}});return s.register(l,"movable"),r.Movable=l});
//# sourceMappingURL=sourcemaps/Movable.js.map
